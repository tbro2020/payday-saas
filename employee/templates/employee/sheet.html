<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil-Employé-{{ obj.full_name }}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 10px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            padding: 8px 12px;
            border: 1px solid #000;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .photo {
            width: 100px;
        }
        .section-title {
            background-color: #333;
            color: #fff;
            text-align: left;
            padding: 10px;
        }
        .profile-photo {
            text-align: center;
        }
    </style>
</head>
<body>

    <h1>Profil de l'employé <small>{{ obj.full_name }}</small></h1>

    <!-- Photo Section -->
    <table>
        <tr>
            <th colspan="2" class="section-title">Informations Générales</th>
        </tr>
        <tr>
            <td>Photo</td>
            <td class="profile-photo">
                {% if obj.photo %}
                <img src="{{ obj.photo.url|default:'-' }}" alt="{{ obj.full_name|slugify }}" class="photo">
                {% else %}
                N/A
                {% endif %}
            </td>
        </tr>
        <tr>
            <td>Nom</td>
            <td>{{ obj.last_name }}</td>
        </tr>
        <tr>
            <td>Prénom</td>
            <td>{{ obj.first_name }}</td>
        </tr>
        <tr>
            <td>Post-nom</td>
            <td>{{ obj.middle_name|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Date de naissance</td>
            <td>{{ obj.date_of_birth }}</td>
        </tr>
        <tr>
            <td>Genre</td>
            <td>{{ obj.get_gender_display|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>État civil</td>
            <td>{{ obj.get_marital_status_display|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Conjoint</td>
            <td>{{ obj.spouse|default:'N/A' }}</td>
        </tr>
    </table>

    <!-- Employment Information -->
    <table>
        <tr>
            <th colspan="2" class="section-title">Informations d'Emploi</th>
        </tr>
        <tr>
            <td>Matricule</td>
            <td>{{ obj.registration_number|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Numéro de Sécurité Sociale</td>
            <td>{{ obj.social_security_number|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Organisation</td>
            <td>{{ obj.organization.name|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Position</td>
            <td>{{ obj.position|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Grade</td>
            <td>{{ obj.grade.name|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Site</td>
            <td>{{ obj.branch.name|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Direction</td>
            <td>{{ obj.direction.name|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Sous-direction</td>
            <td>{{ obj.sub_direction.name|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Service</td>
            <td>{{ obj.service.name|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Type de Contrat</td>
            <td>{{ obj.agreement.name|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Date d'Engagement</td>
            <td>{{ obj.date_of_join|default:'N/A' }}</td>
        </tr>
    </table>

    <!-- Contact Information -->
    <table>
        <tr>
            <th colspan="2" class="section-title">Informations de Contact</th>
        </tr>
        <tr>
            <td>Numéro de téléphone mobile</td>
            <td>{{ obj.mobile_number|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Email</td>
            <td>{{ obj.email|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Adresse physique</td>
            <td>{{ obj.physical_address }}</td>
        </tr>
    </table>

    <!-- Emergency Information -->
    <table>
        <tr>
            <th colspan="2" class="section-title">Informations d'Urgence</th>
        </tr>
        <tr>
            <td>Contact d'Urgence</td>
            <td>{{ obj.emergency_information|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Relation</td>
            <td>N/A</td>
        </tr>
    </table>

    <!-- Bank Information -->
    <table>
        <tr>
            <th colspan="2" class="section-title">Informations Bancaires</th>
        </tr>
        <tr>
            <td>Payeur</td>
            <td>{{ obj.payer.name|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Numéro de compte</td>
            <td>{{ obj.payment_account|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Mode de paiement</td>
            <td>{{ obj.get_payment_method_display|default:'N/A' }}</td>
        </tr>
    </table>

    <!-- Meta Information -->
    <table>
        <tr>
            <th colspan="2" class="section-title">Informations Administratives</th>
        </tr>
        <tr>
            <td>Mis à jour par</td>
            <td>{{ obj.updated_by|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Créé par</td>
            <td>{{ obj.created_by|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Mis à jour le/à</td>
            <td>{{ obj.updated_at|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Créé le/à</td>
            <td>{{ obj.createt_at|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Meta</td>
            <td>
                {% for k, v in obj.metadata.items %}
                <strong>{{ k }}</strong>: {{ v|default:'N/A' }}<br>
                {% empty %}
                N/A
                {% endfor %}
            </td>
        </tr>
        <tr>
            <td>Commentaire</td>
            <td>{{ obj.comment|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Status</td>
            <td>{{ obj.status|default:'N/A' }}</td>
        </tr>
        <tr>
            <td>Journal</td>
            <td>
                {% for log in logs %}
                <strong>{{ log.action_time }}</strong>: {{ log.change_message }}<br>
                {% endfor %}
            </td>
        </td>
    </table>
</body>
</html>